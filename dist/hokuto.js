'use strict';
/*

HOKUTO

version 0.0.2 ~10.72KB
build #520 on 21/1/2021
with Malta 4.1.28
*/
var hokuto=function(){"use strict";function t(n){var e=this,i=!1;this.status=t.STATUSES.PENDING,this.value=null,this.cause=null,this.resolvers=this.resolvers||[],this.rejectors=this.rejectors||[],this.finalizers=this.finalizers||[],n=n||function(){};try{n(function(n){i||e.status!==t.STATUSES.PENDING||(i=!0,e.status=t.STATUSES.FULFILLED,e.value=n,t.roll(e.resolvers,"value",e),t.roll(e.finalizers,"value",e))},function(n){i||e.status!==t.STATUSES.PENDING||(i=!0,e.status=t.STATUSES.REJECTED,e.cause=n,t.roll(e.rejectors,"cause",e),t.roll(e.finalizers,"cause",e))})}catch(n){return t.reject(n.message)}return this}function n(t){this.config=t,this.map=t.map,this.parent=t.target,this.node=document.createElement(t.tag||"div"),this.rendered=!1,this.toSolve=0,this.state="state"in t?t.state:{},this.data="data"in t?t.data:{},this.rootNode="rootNode"in t?t.rootNode:this,this.parentNode="parentNode"in t?t.parentNode:this,this.resolve=function(){},this.reset=function(){},this.setMethods(),this.prepareState(),this.init()}function e(t,e,i){var o=t.target,r=document.createDocumentFragment(),s=new n(Object.assign({},t,{target:r},{map:{}}));return!i||i in l||(l[i]=s),!0===e&&(o.innerHTML=""),s.render().then(function(){o.appendChild(r)})}function i(t){console.log("init",t)}function o(t,n){e({target:t,children:[{html:n||""}]},!0)}function r(t){var n,i=document.createElement("div");return t.target=i,n=e(t),[i,n.value]}function s(t){var n=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(n),n.onload=function(){n.parentNode.removeChild(n)},n.src=t}function a(t){return t in l&&l[t]}function c(){return l}t.roll=function(t,n,e){t.forEach(function(t){t(e[n])},e)},t.prototype.resolve=function(n){return t.call(this,function(t,e){return t(n)})},t.prototype.reject=function(n){return t.call(this,function(t,e){return e(n)})},t.prototype.launch=function(n){return t.call(this,n)},t.prototype.then=function(n,e){switch(this.status){case t.STATUSES.REJECTED:t.roll(this.rejectors,"cause",this);break;case t.STATUSES.PENDING:this.resolvers.push(n),e&&this.rejectors.push(e);break;case t.STATUSES.FULFILLED:n(this.value)}return this},t.prototype.catch=function(n){switch(this.status){case t.STATUSES.PENDING:this.rejectors.push(n);break;case t.STATUSES.REJECTED:return n.call(this,this.cause)}return this},t.prototype.finally=function(n){return this.finalizers.push(n),this.status!==t.STATUSES.PENDING&&t.roll(this.finalizers,"value",this),this},t.STATUSES={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"},t._isFunc=function(t){return"function"==typeof t},t._isIterable=function(n){return null!=n&&t._isFunc(n[Symbol.iterator])},t.one=function(n){return new t(n)},t.all=function(n){if(!t._isIterable(n))return t.reject("Balle.all acceps an Iterable Promise only");var e=[],i=n.length,o=0;return new t(function(t,r){n.forEach(function(n,s){"REJECTED"==n.status&&r(n.cause),n.then(function(n){o++,e[s]=n,o==i&&t(e)}).catch(r)})})},t.race=function(n){return t._isIterable(n)?new t(function(t,e){n.forEach(function(n){n.then(t).catch(e)})}):t.reject("Balle.race acceps an Iterable Promise only")},t.chain=function(n){if(!t._isIterable(n))return t.reject("Balle.chain acceps an Iterable Promise only");var e=n.length;return new t(function(t,i){!function o(r,s){return r===e?t(s):n[r](s).then(function(t){o(++r,t)}).catch(function(t){i(t)})}(0)})},t.reject=function(n){return new t(function(t,e){return e(n)})},t.resolve=function(n){return new t(function(e,i){n instanceof t?n.then(e).catch(i):e(n)})},"object"==typeof exports&&(module.exports=t);var u=function(){function t(t,n){return JSON.stringify(t)===JSON.stringify(n)&&!e(n)}function n(t){return"string"==typeof t||t instanceof String}function e(t){return t instanceof RegExp}function i(t){var n=String(t)!==t,e=t===Object(t),i="function"!=typeof t,o={}.toString.call(t).match(/\[object\sObject\]/);return n&&e&&i&&!(!o||!o.length)}function o(t){var n={}.toString.call(t).match(/\[object\sArray\]/);return String(t)!==t&&!(!n||!n.length)}function r(r,s,a,c){if(!i(s)&&!o(s))throw new Error("BAD PARAM: must search into an object or an array");var u,f=0,l=function(i,o){return n(i)&&e(o)?i.match(o):t(i,o)},h={key:function(t,n,e){return"function"==typeof e?e(t):l(t,e)},value:function(t,n,e){return"function"==typeof e?e(n):l(n,e)},keyvalue:function(t,n,e){return("function"==typeof e.key&&e.key(t)||l(t,e.key))&&("function"==typeof e.value&&e.value(n)||l(n,e.value))}}[r],p=[],d=function(t,n,e,i,o){var r=[].concat.call(t,[n]),s=h(n,i[n],e),a=c.min<=o&&o<=c.max,u=r.length;a&&s&&(p.push({obj:i,value:i[n],key:r[u-1],parentKey:r[u-2],path:r.join("/"),container:r.slice(0,u-1).join("/"),parentContainer:r.slice(0,u-2).join("/"),regexp:s,level:o}),f++),v(i[n],e,r,o+1)},v=function(t,n,e,i){var o,r;if(t instanceof Array)for(o=0,r=t.length;o<r&&(d(e,o,n,t,i),c.limit!==f);o++);else if("object"==typeof t)for(o in t)if(d(e,o,n,t,i),c.limit===f)break};return c.limit="limit"in c?~~c.limit:1/0,c.min="min"in c?~~c.min:0,c.max="max"in c?~~c.max:1/0,0===c.limit?p:(c.min=c.min<0?0:c.min,c.max<c.min&&(u=c.min,c.min=c.max,c.max=u),v(s,a,[],0),p)}return{forKey:function(t,n,e){return r("key",t,n,e||{})},forValue:function(t,n,e){return r("value",t,n,e||{})},forKeyValue:function(t,n,e){return r("keyvalue",t,n,e||{})}}}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=u),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,n){if(null===t||void 0===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1,o=arguments.length;i<o;i++){var r=arguments[i];if(null!==r&&void 0!==r)for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},writable:!0,configurable:!0});var f=function(t){function e(t,n){var e;if(typeof n!==f)for(e in n)"float"===e?t.style[e.replace(/^float$/i,"cssFloat")]=n[e]:t.style[e]=n[e]}function i(t,n){if(typeof n!==f)for(var e in n)l.indexOf(e)<0&&t.setAttribute(e,n[e])}function o(t,n){if(typeof n!==f)for(var e in n)t.dataset[e]=n[e]}function r(t){return""+t}function s(t,n){t.appendChild(document.createTextNode(n))}function a(t,n){t.innerHTML=r(n)}function c(t){return t instanceof n}function u(t,n){h.unhandlers[t]=h.unhandlers[t]||[],h.unhandlers[t].push(n)}var f="undefined",l=["innerHTML","style","dataset","className"],h={events:{getElementDeterminant:function(t){return t.tagName.match(/input|textarea|select/i)?"value":"innerHTML"},getElementEvent:function(t){return t.tagName.match(/input|textarea/i)?"input":"change"}},unhandlers:{}},p=function(){function n(t,n,e){u(t,function(){d(t,n,e)})}return"addEventListener"in t?function(t,e,i,o){o=o||!1,t.addEventListener.apply(t,[e,i,o]),n(t,e,i)}:"attachEvent"in t?function(t,e,i){t.attachEvent.apply(t,["on"+e,i]),n(t,e,i)}:function(){throw new Error("No straight way to bind an event")}}(),d=function(){return"removeEventListener"in t?function(t,n,e){t.removeEventListener(n,e)}:"detachEvent"in t?function(t,n,e){t.detachEvent.apply(t,["on"+n,e])}:function(){throw new Error("No straight way to unbind an event")}}(),v=function(n){return n||(n=t.event,n.cancelBubble=!0,n.returnValue=!1),"stopPropagation"in n&&n.stopPropagation(),n.preventDefault(),!1},y=function(t,n,e){p(t,n,function i(o){e.call(t,o),d(t,n,i)})},g=function(n){n=n||t.event;var e=n.currentTarget||typeof n.target!==f?n.target:n.srcElement;if(!e)return!1;for(;3===e.nodeType&&null!==e.parentNode;)e=e.parentNode;return e},m=function(){var t,n,e=[],i=setInterval(function(){if("complete"===document.readyState)for(clearInterval(i),t=0,n=e.length;t<n;t++)e[t].call(this)},10);return function(t){"complete"===document.readyState?t.call(this):e.push(t)}}();return{on:p,off:d,kill:v,once:y,eventTaget:g,ready:m,isUnode:c,setText:s,setHtml:a,setStyle:e,setAttrs:i,setData:o}}(window);n.prototype.prepareState=function(){var t="state"in this.config,n=t?this.config.state:{};this.state="function"==typeof n?n():n},n.prototype.init=function(){this.rendered=!1,this.setCall("Ref,Events,Text,Html,Style,Attrs,Data,Children,Cbs")},n.prototype.setCall=function(t){var n=this;t.split(/,/).forEach(function(t){n["set"+t]()})},n.prototype.cleanup=function(){this.node.innerHTML="",this.node.parentNode.removeChild(this.node)},n.prototype.setChildren=function(){var t=this,e=[];if("children"in this.config){var i={target:t.node,rootNode:t.rootNode,map:t.map,parentNode:t};e="function"==typeof this.config.children?this.config.children.call(this).map(function(t){return new n(Object.assign({},t,i))}):this.config.children.map(function(t){return new n(Object.assign({},t,i))})}this.toSolve=e.length,this.children=e},n.prototype.setMethods=function(){var t,n=this,e=Object.keys(this.config);return e.forEach(function(e){(t=e.match(/^method_(\w*)$/i))&&(t[1]in n?console.warn("[WARNING] : method `"+t[0]+" cant be added, would override existing element."):n[t[1]]=n.config[t[0]].bind(n))}),this},n.prototype.getNode=function(t){return this.map[t]},n.prototype.setRef=function(t,n){t?(n||this).map[t]=n||this:void 0!==this.config.ref&&(this.map[this.config.ref]=this)},n.prototype.setCbs=function(){this.cb="cb"in this.config&&"function"==typeof this.config.cb?this.config.cb.bind(this):this.solve.bind(this)},n.prototype.setStyle=function(t){t&&(this.config.style=Object.assign({},this.config.style,t)),this.config.style&&f.setStyle(this.node,this.config.style)},n.prototype.setAttrs=function(t){t&&(this.config.attrs=Object.assign({},this.config.attrs,t)),this.config.attrs&&f.setAttrs(this.node,this.config.attrs)},n.prototype.setData=function(t){t&&(this.config.data=Object.assign({},this.config.data,t)),this.config.data&&(this.data=this.config.data,f.setData(this.node,this.data))},n.prototype.setText=function(t){void 0!==t&&(this.config.text=t),void 0!==this.config.text&&f.setText(this.node,this.config.text)},n.prototype.setHtml=function(t){void 0!==t&&(this.config.html=t),void 0!==this.config.html&&f.setHtml(this.node,this.config.html)},n.prototype.killEvent=function(t){f.kill(t)},n.prototype.setEvents=function(){var t,n,e,i=this;for(t in i.config)(n=t.match(/^(on(ce)?)([A-Z]{1}[a-z]*)$/))&&(e=n[3].toLowerCase(),function(t){f[n[1]](i.node,e,function(n){i.config[t].call(i,n)})}(t));return this},n.prototype.setState=function(t){for(var n in t)t.hasOwnProperty(n)&&(this.state[n]=t)},n.prototype.done=n.prototype.solve=function(){--this.toSolve<=0&&(this.parent.appendChild(this.node),this.rendered=!0,this.resolve(this))},n.prototype.render=function(){var n=this,e=new t(function(t,e){n.resolve=t,n.reject=e});return this.rendered=!1,this.toSolve>0?this.children.forEach(function(t,e){t.render().then(function(){n.node.appendChild(t.node),n.cb()})}):this.rendered=!0,this.cb(),e},{}.solve=function(n){return t.one(function(t,e){process(n).then(function(n){t(n)})})};var l={};return{render:e,renderWithComponents:i,cleanup:o,get:r,preload:s,getElement:a,getElements:c}}();