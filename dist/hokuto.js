'use strict';
/*

HOKUTO

version 0.0.2 ~10KB
build #426 on 29/12/2020
with Malta 4.1.25
*/
var hokuto=function(){"use strict";function t(e){var n=this,i=!1;this.status=t.STATUSES.PENDING,this.value=null,this.cause=null,this.resolvers=this.resolvers||[],this.rejectors=this.rejectors||[],this.finalizers=this.finalizers||[],e=e||function(){};try{e(function(e){i||n.status!==t.STATUSES.PENDING||(i=!0,n.status=t.STATUSES.FULFILLED,n.value=e,t.roll(n.resolvers,"value",n),t.roll(n.finalizers,"value",n))},function(e){i||n.status!==t.STATUSES.PENDING||(i=!0,n.status=t.STATUSES.REJECTED,n.cause=e,t.roll(n.rejectors,"cause",n),t.roll(n.finalizers,"cause",n))})}catch(e){return t.reject(e.message)}return this}function e(t){this.config=t,this.map=t.map,this.parent=t.target,this.node=document.createElement(t.tag||"div"),this.rendered=!1,this.toSolve=0,this.state="state"in t?t.state:{},this.data="data"in t?t.data:{},this.rootNode="rootNode"in t?t.rootNode:this,this.parentNode="parentNode"in t?t.parentNode:this,this.resolve=function(){},this.reset=function(){},this.setMethods(),this.prepareState(),this.init()}t.roll=function(t,e,n){t.forEach(function(t){t(n[e])},n)},t.prototype.resolve=function(e){return t.call(this,function(t,n){return t(e)})},t.prototype.reject=function(e){return t.call(this,function(t,n){return n(e)})},t.prototype.launch=function(e){return t.call(this,e)},t.prototype.then=function(e,n){switch(this.status){case t.STATUSES.REJECTED:t.roll(this.rejectors,"cause",this);break;case t.STATUSES.PENDING:this.resolvers.push(e),n&&this.rejectors.push(n);break;case t.STATUSES.FULFILLED:e(this.value)}return this},t.prototype.catch=function(e){switch(this.status){case t.STATUSES.PENDING:this.rejectors.push(e);break;case t.STATUSES.REJECTED:return e.call(this,this.cause)}return this},t.prototype.finally=function(e){return this.finalizers.push(e),this.status!==t.STATUSES.PENDING&&t.roll(this.finalizers,"value",this),this},t.STATUSES={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"},t._isFunc=function(t){return"function"==typeof t},t._isIterable=function(e){return null!=e&&t._isFunc(e[Symbol.iterator])},t.one=function(e){return new t(e)},t.all=function(e){if(!t._isIterable(e))return t.reject("Balle.all acceps an Iterable Promise only");var n=[],i=e.length,o=0;return new t(function(t,r){e.forEach(function(e,s){"REJECTED"==e.status&&r(e.cause),e.then(function(e){o++,n[s]=e,o==i&&t(n)}).catch(r)})})},t.race=function(e){return t._isIterable(e)?new t(function(t,n){e.forEach(function(e){e.then(t).catch(n)})}):t.reject("Balle.race acceps an Iterable Promise only")},t.chain=function(e){if(!t._isIterable(e))return t.reject("Balle.chain acceps an Iterable Promise only");var n=e.length;return new t(function(t,i){!function o(r,s){return r===n?t(s):e[r](s).then(function(t){o(++r,t)}).catch(function(t){i(t)})}(0)})},t.reject=function(e){return new t(function(t,n){return n(e)})},t.resolve=function(e){return new t(function(n,i){e instanceof t?e.then(n).catch(i):n(e)})},"object"==typeof exports&&(module.exports=t);var n=function(){function t(t,n){return e(t)?t===n:JSON.stringify(t)===JSON.stringify(n)}function e(t){return t&&"object"==typeof t&&null!==t&&(1===t.nodeType||11===t.nodeType)&&"string"==typeof t.nodeName}function n(t){return"string"==typeof t||t instanceof String}function i(t){return t instanceof RegExp}function o(o,r,s,a){var c,u=+new Date,f=0,l=0,h={key:function(e,o,r){return"function"==typeof r?r(e):n(e)&&i(r)?e.match(r):t(e,r)},value:function(e,o,r){return"function"==typeof r?r(o):n(o)&&i(r)?o.match(r):t(o,r)},keyvalue:function(e,o,r){return("function"==typeof r.key&&r.key(e)||(n(e)&&i(r.key)?e.match(r.key):t(e,r.key)))&&("function"==typeof r.value&&r.value(o)||(n(o)&&i(r.value)?o.match(r.value):t(o,r.value)))}}[o],p={timeElapsed:0,results:[]},d=function(t,e,n,i,o){var r=[].concat.call(t,[e]),s=h(e,i[e],n),c=a.min<=o&&o<=a.max,u=r.length;c&&s&&(p.results.push({obj:i,value:i[e],key:r[u-1],parentKey:r[u-2],path:r.join("/"),container:r.slice(0,u-1).join("/"),parentContainer:r.slice(0,u-2).join("/"),regexp:s,level:o}),l++),v(i[e],n,r,o+1)},v=function(t,n,i,o){if(!e(t)){var r,s;if(t instanceof Array)for(r=0,s=t.length;r<s&&(d(i,r,n,t,o),a.limit!==l);r++);else if("object"==typeof t)for(r in t)if(d(i,r,n,t,o),a.limit===l)break}};return a.limit="limit"in a?~~a.limit:1/0,a.min="min"in a?~~a.min:0,a.max="max"in a?~~a.max:1/0,a.min=a.min<0?0:a.min,a.max<a.min&&(c=a.min,a.min=a.max,a.max=c),v(r,s,[],0),f=+new Date,p.timeElapsed=f-u,p}return{forKey:function(t,e,n){return o("key",t,e,n||{})},forValue:function(t,e,n){return o("value",t,e,n||{})},forKeyValue:function(t,e,n){return o("keyvalue",t,e,n||{})}}}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=n),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null===t||void 0===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,o=arguments.length;i<o;i++){var r=arguments[i];if(null!==r&&void 0!==r)for(var s in r)({}).hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},writable:!0,configurable:!0});var i=function(t){function n(t,e){var n;if(typeof e!==f)for(n in e)"float"===n?t.style[n.replace(/^float$/i,"cssFloat")]=e[n]:t.style[n]=e[n]}function i(t,e){if(typeof e!==f)for(var n in e)l.indexOf(n)<0&&t.setAttribute(n,e[n])}function o(t,e){if(typeof e!==f)for(var n in e)t.dataset[n]=e[n]}function r(t){return""+t}function s(t,e){t.appendChild(document.createTextNode(e))}function a(t,e){t.innerHTML=r(e)}function c(t){return t instanceof e}function u(t,e){h.unhandlers[t]=h.unhandlers[t]||[],h.unhandlers[t].push(e)}var f="undefined",l=["innerHTML","style","dataset","className"],h={events:{getElementDeterminant:function(t){return t.tagName.match(/input|textarea|select/i)?"value":"innerHTML"},getElementEvent:function(t){return t.tagName.match(/input|textarea/i)?"input":"change"}},unhandlers:{}},p=function(){function e(t,e,n){u(t,function(){d(t,e,n)})}return"addEventListener"in t?function(t,n,i){t.addEventListener.apply(t,[n,i,!1]),e(t,n,i)}:"attachEvent"in t?function(t,n,i){t.attachEvent.apply(t,["on"+n,i]),e(t,n,i)}:function(){throw new Error("No straight way to bind an event")}}(),d=function(){return"removeEventListener"in t?function(t,e,n){t.removeEventListener(e,n)}:"detachEvent"in t?function(t,e,n){t.detachEvent.apply(t,["on"+e,n])}:function(){throw new Error("No straight way to unbind an event")}}(),v=function(e){return e||(e=t.event,e.cancelBubble=!0,e.returnValue=!1),"stopPropagation"in e&&e.stopPropagation(),e.preventDefault(),!1},y=function(e){e=e||t.event;var n=e.currentTarget||typeof e.target!==f?e.target:e.srcElement;if(!n)return!1;for(;3===n.nodeType&&null!==n.parentNode;)n=n.parentNode;return n},m=function(){var t,e,n=[],i=setInterval(function(){if("complete"===document.readyState)for(clearInterval(i),t=0,e=n.length;t<e;t++)n[t].call(this)},10);return function(t){"complete"===document.readyState?t.call(this):n.push(t)}}();return{on:p,off:d,kill:v,eventTaget:y,ready:m,isUnode:c,setText:s,setHtml:a,setStyle:n,setAttrs:i,setData:o}}(window);return e.prototype.prepareState=function(){var t="state"in this.config,e=t?this.config.state:{};this.state="function"==typeof e?e():e},e.prototype.init=function(){this.rendered=!1,this.setCall("Ref,Events,Text,Html,Style,Attrs,Data,Children,Cbs")},e.prototype.setCall=function(t){var e=this;t.split(/,/).forEach(function(t){e["set"+t]()})},e.prototype.cleanup=function(){this.node.innerHTML="",this.node.parentNode.removeChild(this.node)},e.prototype.setChildren=function(){var t=this,n=[];if("children"in this.config){var i={target:t.node,rootNode:t.rootNode,map:t.map,parentNode:t};n="function"==typeof this.config.children?this.config.children.call(this).map(function(t){return new e(Object.assign({},t,i))}):this.config.children.map(function(t){return new e(Object.assign({},t,i))})}this.toSolve=n.length,this.children=n},e.prototype.setMethods=function(){var t,e=this,n=Object.keys(this.config);return n.forEach(function(n){(t=n.match(/^method_(\w*)$/i))&&(t[1]in e?console.warn("[WARNING] : method `"+t[0]+" cant be added, would override existing element."):e[t[1]]=e.config[t[0]].bind(e))}),this},e.prototype.getNode=function(t){return this.map[t]},e.prototype.setRef=function(t,e){t?(e||this).map[t]=e||this:void 0!==this.config.ref&&(this.map[this.config.ref]=this)},e.prototype.setCbs=function(){this.cb="cb"in this.config&&"function"==typeof this.config.cb?this.config.cb.bind(this):this.solve.bind(this)},e.prototype.setStyle=function(t){t&&(this.config.style=Object.assign({},this.config.style,t)),this.config.style&&i.setStyle(this.node,this.config.style)},e.prototype.setAttrs=function(t){t&&(this.config.attrs=Object.assign({},this.config.attrs,t)),this.config.attrs&&i.setAttrs(this.node,this.config.attrs)},e.prototype.setData=function(t){t&&(this.config.data=Object.assign({},this.config.data,t)),this.config.data&&(this.data=this.config.data,i.setData(this.node,this.data))},e.prototype.setText=function(t){void 0!==t&&(this.config.text=t),void 0!==this.config.text&&i.setText(this.node,this.config.text)},e.prototype.setHtml=function(t){void 0!==t&&(this.config.html=t),void 0!==this.config.html&&i.setHtml(this.node,this.config.html)},e.prototype.killEvent=function(t){i.kill(t)},e.prototype.setEvents=function(){var t,e,n,o=this;for(t in o.config)(e=t.match(/^on([A-Z]{1}[a-z]*)$/))&&(n=e[1].toLowerCase(),function(t){i.on(o.node,n,function(e){o.config[t].call(o,e)})}(t));return this},e.prototype.setState=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.state[e]=t)},e.prototype.done=e.prototype.solve=function(){--this.toSolve<=0&&(this.parent.appendChild(this.node),this.rendered=!0,this.resolve(this))},e.prototype.render=function(){var e=this,n=new t(function(t,n){e.resolve=t,e.reject=n});return this.rendered=!1,this.toSolve>0?this.children.forEach(function(t){t.render().then(function(){e.node.appendChild(t.node),e.cb()})}):this.rendered=!0,this.cb(),n},{}.solve=function(e){return t.one(function(t,n){process(e).then(function(e){t(e)})})},{render:function(t){var n=t.target,i=document.createDocumentFragment();return new e(Object.assign({},t,{target:i},{map:{}})).render().then(function(){n.appendChild(i)})},renderWithComponents:function(t){console.log("init",t)}}}();