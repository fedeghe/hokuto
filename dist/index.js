/*!
 * 
 * hokuto
 *
 * version 0.0.2
 * Tue May 18 2021 22:01:48 GMT+0200 (Central European Summer Time)
 */(()=>{"use strict";var n={969:t=>{function i(t){var e=this,n=!1;this.status=i.STATUSES.PENDING,this.value=null,this.cause=null,this.resolvers=this.resolvers||[],this.rejectors=this.rejectors||[],this.finalizers=this.finalizers||[],t=t||function(){};try{t(function(t){n||e.status!==i.STATUSES.PENDING||(n=!0,e.status=i.STATUSES.FULFILLED,e.value=t,i.roll(e.resolvers,"value",e),i.roll(e.finalizers,"value",e))},function(t){n||e.status!==i.STATUSES.PENDING||(n=!0,e.status=i.STATUSES.REJECTED,e.cause=t,i.roll(e.rejectors,"cause",e),i.roll(e.finalizers,"cause",e))})}catch(t){return i.reject(t.message)}return this}i.roll=function(t,e,n){t.forEach(function(t){t(n[e])},n)},i.prototype.resolve=function(n){return i.call(this,function(t,e){return t(n)})},i.prototype.reject=function(n){return i.call(this,function(t,e){return e(n)})},i.prototype.launch=function(t){return i.call(this,t)},i.prototype.then=function(t,e){switch(this.status){case i.STATUSES.REJECTED:i.roll(this.rejectors,"cause",this);break;case i.STATUSES.PENDING:this.resolvers.push(t),e&&this.rejectors.push(e);break;case i.STATUSES.FULFILLED:t(this.value)}return this},i.prototype.catch=function(t){switch(this.status){case i.STATUSES.PENDING:this.rejectors.push(t);break;case i.STATUSES.REJECTED:return t.call(this,this.cause)}return this},i.prototype.finally=function(t){return this.finalizers.push(t),this.status!==i.STATUSES.PENDING&&i.roll(this.finalizers,"value",this),this},i.STATUSES={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"},i._isFunc=function(t){return"function"==typeof t},i._isIterable=function(t){return null!=t&&i._isFunc(t[Symbol.iterator])},i.one=function(t){return new i(t)},i.all=function(t){if(!i._isIterable(t))return i.reject("Balle.all acceps an Iterable Promise only");var o=[],r=t.length,s=0;return new i(function(n,i){t.forEach(function(t,e){"REJECTED"==t.status&&i(t.cause),t.then(function(t){s++,o[e]=t,s==r&&n(o)}).catch(i)})})},i.race=function(t){return i._isIterable(t)?new i(function(e,n){t.forEach(function(t){t.then(e).catch(n)})}):i.reject("Balle.race acceps an Iterable Promise only")},i.chain=function(r){if(!i._isIterable(r))return i.reject("Balle.chain acceps an Iterable Promise only");var s=r.length;return new i(function(i,o){!function e(n,t){return n===s?i(t):r[n](t).then(function(t){e(++n,t)}).catch(function(t){o(t)})}(0)})},i.reject=function(n){return new i(function(t,e){return e(n)})},i.resolve=function(n){return new i(function(t,e){n instanceof i?n.then(t).catch(e):t(n)})},t.exports=i}},i={};function F(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return n[t](e,e.exports,F),e.exports}F.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return F.d(e,{a:e}),e},F.d=(t,e)=>{for(var n in e)F.o(e,n)&&!F.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},F.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),F.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var U={};(()=>{function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}F.r(U);var n=window,t="undefined",f=(n.document,n.history,{U:t,F:"function"});l(Object.assign)!==f.F&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,o=arguments.length;i<o;i++){var r=arguments[i];if(null!=r)for(var s in r)!{}.hasOwnProperty.call(r,s)||(n[s]=r[s])}return n},writable:!0,configurable:!0});var t=F(969),i=F.n(t),o=["innerHTML","style","dataset","className"];const e={remove:function(t){return t.parentNode&&t.parentNode.removeChild(t)},setText:function(t,e){t.appendChild(document.createTextNode(e))},setHtml:function(t,e){t.innerHTML=""+e},setStyle:function(t,e){if(l(e)===f.U)throw new Error("ERR: styles needed");for(var n in e)"float"===n?t.style[n.replace(/^float$/i,"cssFloat")]=e[n]:t.style[n]=e[n]},setAttrs:function(t,e){if(l(e)===f.U)throw new Error("ERR: attrs needed");for(var n in e)o.indexOf(n)<0&&t.setAttribute(n,e[n])},unsetAttrs:function(t,e){if(l(e)===f.U)throw new Error("ERR: attrs needed");for(var n in e)o.indexOf(n)<0&&t.removeAttribute(n,e[n])},setData:function(t,e){if(l(e)===f.U)throw new Error("ERR: data needed");for(var n in e)t.dataset[n]=e[n]},unsetData:function(t,e){if(l(e)===f.U)throw new Error("ERR: data needed");for(var n in e)delete t.dataset[n]}};var r={events:{getElementDeterminant:function(t){return t.tagName.match(/input|textarea|select/i)?"value":"innerHTML"},getElementEvent:function(t){return t.tagName.match(/input|textarea/i)?"input":"change"}},unhandlers:{}};var s,a,c,h,u,d="addEventListener"in n?function(t,e,n,i){t.addEventListener.apply(t,[e,n,i=i||!1]),g(t,e,n)}:"attachEvent"in n?function(t,e,n){t.attachEvent.apply(t,["on"+e,n]),g(t,e,n)}:function(){throw new Error("No straight way to bind an event")},p="removeEventListener"in n?function(t,e,n){t.removeEventListener(e,n)}:"detachEvent"in n?function(t,e,n){t.detachEvent.apply(t,["on"+e,n])}:function(){throw new Error("No straight way to unbind an event")},t=(c=[],h="complete",u=setInterval(function(){if(document.readyState===h)for(clearInterval(u),s=0,a=c.length;s<a;s++)c[s].call(this)},10),function(t){document.readyState===h?t.call(this):c.push(t)});function g(t,e,n){var i,o;i=t,o=function(){p(t,e,n)},r.unhandlers[i]=r.unhandlers[i]||[],r.unhandlers[i].push(o)}const m={on:d,off:p,kill:function(t){return t||((t=n.event).cancelBubble=!0,t.returnValue=!1),"stopPropagation"in t&&t.stopPropagation(),t.preventDefault(),!1},once:function(n,i,o){d(n,i,function t(e){o.call(n,e),p(n,i,t)})},eventTarget:function(t){var e=(t=t||n.event).currentTarget||l(t.target)!==TYPES.U?t.target:t.srcElement;if(!e)return!1;for(;3===e.nodeType&&null!==e.parentNode;)e=e.parentNode;return e},ready:t,unhandle:function(t){r.unhandlers[t]&&r.unhandlers[t].forEach(function(t){t()}),r.unhandlers=[]}};function v(t,e){this.config=t,this.map=e,this.parent=t.target,this.tag=t.tag||"div",this.node=this.config.ns?document.createElementNS(t.ns,this.tag):document.createElement(this.tag),this.rendered=!1,this.toSolve=0,this.state="state"in t?t.state:{},this.data="data"in t?t.data:{},this.init="init"in t&&t.init,this.rootNode="rootNode"in t?t.rootNode:this,this.parentNode="parentNode"in t?t.parentNode:this,this.paramsFromChildren=[],this.root=this.map.rootNode,this.abort=this.map.abort,this.getNode=this.map.getNode,this.getNodes=this.map.getNodes,this.lateWid=this.map.lateWid,this.getElements=this.map.getElements,this.getElement=this.map.getElement,this.resolve=function(){},this.reset=function(){},this.setMethods(),this.prepareState(),this.initialize(),this.checkInit(),this.checkEnd()}v.prototype.prepareState=function(){var t="state"in this.config?this.config.state:{};this.state=l(t)===f.F?t():t},v.prototype.initialize=function(){this.rendered=!1,this.setCall("Ref,Events,Text,Html,Style,Attrs,Data,Children,Cbs"),l(this.config[v.identifier])!==f.U&&l(this.config.map.elements[this.config[v.identifier]])===f.U&&this.map.add(this.config[v.identifier],this)},v.prototype.setCall=function(t){var e=this;t.split(/,/).forEach(function(t){e["set"+t]()})},v.prototype.cleanup=function(){this.node.innerHTML="",this.node.parentNode.removeChild(this.node)},v.prototype.setChildren=function(){var e=this,t=[];"children"in this.config&&(t=(l(this.config.children)===f.F?this.config.children.call(this):this.config.children).map(function(t){return new v(Object.assign({},t,{target:e.node,rootNode:e.rootNode,map:e.map,parentNode:e}),e.map)})),this.toSolve=t.length,this.children=t},v.prototype.setMethods=function(){var e,n=this;Object.keys(this.config).forEach(function(t){(e=t.match(/^method_(\w*)$/i))&&(e[1]in n?console.warn("[WARNING] : method `"+e[0]+" cant be added, would override existing element."):n[e[1]]=n.config[e[0]].bind(n))})},v.prototype.setRef=function(t,e){t?(e||this).map[t]=e||this:l(this.config.ref)!==f.U&&this.map.add(this.config.ref,this)},v.prototype.setCbs=function(){this.cb=("cb"in this.config&&l(this.config.cb)===f.F?this.config.cb:this.solve).bind(this)},v.prototype.setStyle=function(t){t&&(this.config.style=Object.assign({},this.config.style,t)),this.config.style&&e.setStyle(this.node,this.config.style)},v.prototype.setAttrs=function(t){t&&(this.config.attrs=Object.assign({},this.config.attrs,t)),this.config.attrs&&e.setAttrs(this.node,this.config.attrs)},v.prototype.setData=function(t){t&&(this.config.data=Object.assign({},this.config.data,t)),this.config.data&&(this.data=this.config.data,e.setData(this.node,this.data))},v.prototype.setText=function(t){l(t)!==f.U&&(this.config.text=t),l(this.config.text)!==f.U&&e.setText(this.node,this.config.text)},v.prototype.setHtml=function(t){l(t)!==f.U&&(this.config.html=t),l(this.config.html)!==f.U&&e.setHtml(this.node,this.config.html)},v.prototype.killEvent=function(t){m.kill(t)},v.prototype.checkInit=function(t){return"init"in this.config&&l(this.config.init)===f.F&&(this.config.init.call(this)||this.abort()),this},v.prototype.checkEnd=function(t){var e=this;return"end"in this.config&&l(this.config.end)===f.F&&this.map.endFunctions.push(function(){e.config.end.call(e)}),this},v.prototype.unhandle=function(t){m.unhandle(t||this.node)},v.prototype.setEvents=function(){var t,n,i,o=this;for(t in o.config)(n=t.match(/^(on(ce)?)([A-Z]{1}[a-z]*)$/))&&(i=n[3].toLowerCase(),function(e){m[n[1]](o.node,i,function(t){o.config[e].call(o,t)})}(t));return this},v.prototype.setState=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.state[e]=t)},v.prototype.done=v.prototype.solve=function(){var t=[].slice.call(arguments,0);t.length&&this.parentNode.paramsFromChildren.push(t),this.parentNode.toSolve--,this.toSolve<=0&&(this.parent.appendChild(this.node),this.rendered=!0,this.resolve(this))},v.prototype.render=function(){var t,n=this,e=new(i())(function(t,e){n.resolve=t,n.reject=e});return this.rendered=!1,0<this.toSolve?this.children.forEach(function(t,e){t.render().then(function(){n.node.appendChild(t.node),0===n.toSolve&&(n.paramsFromChildren.length?n.cb(n.paramsFromChildren):n.cb())})}):(this.rendered=!0,(t=this.cb(n.paramsFromChildren))&&this.rootNode.paramsFromChildren.push(t)),e},v.prototype.report=function(){var t=JSON.stringify(this.config).length,e=this.node.innerHTML.length;return(e/t).toFixed(2)+" (html:"+e+" / json:"+t+")"},v.isUnode=function(t){return t instanceof v},v.identifier="id";const E=v;var y,S=0;const b={add:function(t){return S+=t},get:function(){var t=S+0;return S=0,t}};function N(t,e,n){var i,o=+new Date,r=t.target,s=r.innerHTML,a=document.createDocumentFragment(),c=!0,h={abort:function(){return c=!1,r.innerHTML=s,"onAbort"in t&&l(t.onAbort)===f.F&&t.onAbort.call(null,t),!1},add:function(t,e){h.elements[t]=e},getNode:function(t){return h.elements[t]||!1},getNodes:function(){return h.elements},lateWid:function(t){h.elements[t]=this},elements:{},endFunctions:[],getElement:T,getElements:w},u=new E(Object.assign({},t,{target:a}),h);return!n||n in y||(y[n]=u),!0===e&&(r.innerHTML=""),u.render().then(function(){for(c||returnrootNode,r.appendChild(a),i=+new Date,b.add(i-o);h.endFunctions.length;)h.endFunctions.pop()()})}function T(t){return t in y&&y[t]}function w(){return y}window.hokuto=(y={},{render:N,renderWithComponents:function(t){console.log("init",t)},cleanup:function(t,e){N({target:t,children:[{html:e||""}]},!0)},get:function(t){var e=document.createElement("div");return[t.target=e,N(t).value]},preload:function(t){var e=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(e),e.onload=function(){e.parentNode.removeChild(e)},e.src=t},getElement:T,getElements:w})})(),module.exports=U})();